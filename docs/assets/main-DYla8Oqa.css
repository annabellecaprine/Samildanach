:root{--color-slate-50: #f8fafc;--color-slate-100: #f1f5f9;--color-slate-200: #e2e8f0;--color-slate-300: #cbd5e1;--color-slate-400: #94a3b8;--color-slate-500: #64748b;--color-slate-600: #475569;--color-slate-700: #334155;--color-slate-800: #1e293b;--color-slate-900: #0f172a;--color-slate-950: #020617;--color-amber-400: #fbbf24;--color-amber-500: #f59e0b;--color-emerald-500: #10b981;--color-rose-500: #f43f5e;--bg-app: var(--color-slate-950);--bg-panel: var(--color-slate-900);--bg-surface: var(--color-slate-800);--bg-input: var(--color-slate-950);--border-subtle: var(--color-slate-700);--border-strong: var(--color-slate-600);--text-primary: var(--color-slate-50);--text-secondary: var(--color-slate-300);--text-muted: var(--color-slate-500);--accent-primary: var(--color-amber-500);--accent-hover: var(--color-amber-400);--status-success: var(--color-emerald-500);--status-error: var(--color-rose-500)}[data-theme=light]{--bg-app: var(--color-slate-50);--bg-panel: white;--bg-surface: var(--color-slate-100);--bg-input: white;--border-subtle: var(--color-slate-200);--border-strong: var(--color-slate-300);--text-primary: var(--color-slate-900);--text-secondary: var(--color-slate-600);--text-muted: var(--color-slate-400)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:Inter,system-ui,-apple-system,sans-serif;font-size:14px;background-color:var(--bg-app);color:var(--text-primary);overflow:hidden;height:100vh;width:100vw}input,button,textarea,select{font-family:inherit;font-size:inherit;color:inherit}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border-subtle);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}#app{display:grid;grid-template-columns:64px 1fr;grid-template-rows:100vh;height:100vh;width:100vw}#sidebar{background-color:var(--bg-panel);border-right:1px solid var(--border-subtle);display:flex;flex-direction:column;align-items:center;padding:16px 0;gap:16px;z-index:10}.nav-item{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:20px;color:var(--text-muted);transition:all .2s ease;-webkit-user-select:none;user-select:none}.nav-item:hover{background-color:var(--bg-surface);color:var(--text-secondary)}.nav-item.active{background-color:var(--bg-surface);color:var(--accent-primary);box-shadow:inset 2px 0 0 0 var(--accent-primary)}.nav-divider{width:32px;height:1px;background:var(--border-subtle);margin:4px 0}.sidebar-bottom{margin-top:auto;display:flex;flex-direction:column;gap:8px}#main-view{background-color:var(--bg-app);overflow:hidden;position:relative;display:flex}.panel-container{flex:1;display:flex;flex-direction:column;height:100%;padding:16px;overflow:hidden}.btn{padding:8px 16px;cursor:pointer;border-radius:4px;font-size:13px;font-weight:500;transition:all .2s ease;border:none;display:inline-flex;align-items:center;gap:6px}.btn-primary{background:var(--accent-primary);color:var(--bg-app)}.btn-primary:hover{filter:brightness(1.1)}.btn-secondary{background:var(--bg-surface);color:var(--text-secondary);border:1px solid var(--border-subtle)}.btn-secondary:hover{background:var(--bg-panel);color:var(--text-primary)}.btn-icon{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center;border-radius:6px;background:var(--bg-surface);border:1px solid var(--border-subtle);color:var(--text-secondary);cursor:pointer}.btn-icon:hover{background:var(--bg-panel);color:var(--text-primary)}.input{padding:8px 12px;background:var(--bg-input);border:1px solid var(--border-subtle);border-radius:4px;color:var(--text-primary);font-size:13px;outline:none;transition:border-color .2s}.input:focus{border-color:var(--accent-primary)}.input-title{font-size:24px;font-weight:700;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--text-primary);outline:none;padding-bottom:4px;transition:border-color .2s}.input-title:focus{border-bottom-color:var(--accent-primary)}.textarea{padding:8px 12px;background:var(--bg-input);border:1px solid var(--border-subtle);border-radius:4px;color:var(--text-primary);font-size:13px;resize:vertical;min-height:60px;outline:none}.textarea:focus{border-color:var(--accent-primary)}.label{font-size:11px;color:var(--text-muted);text-transform:uppercase;font-weight:500;letter-spacing:.5px}.card{background:var(--bg-surface);border-radius:8px;padding:16px}.card-bordered{border:1px solid var(--border-subtle)}.badge{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:700;text-transform:uppercase}.modal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000;display:flex;align-items:center;justify-content:center;animation:fadeIn .2s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--bg-panel);padding:24px;border-radius:12px;border:1px solid var(--border-subtle);width:400px;max-width:90vw;box-shadow:0 20px 25px -5px #00000080,0 10px 10px -5px #0003;animation:slideUp .2s cubic-bezier(.16,1,.3,1);max-height:90vh;overflow-y:auto}@keyframes slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-title{font-size:18px;font-weight:700;color:var(--text-primary);margin-bottom:16px}.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}.list-item{padding:8px 10px;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:8px;color:var(--text-secondary);font-size:13px;transition:background .15s}.list-item:hover{background:var(--bg-surface)}.list-item.active{background:var(--bg-surface);color:var(--text-primary);font-weight:700}.tab{padding:4px 10px;border-radius:12px;cursor:pointer;font-size:11px;border:1px solid var(--border-subtle);background:var(--bg-surface);color:var(--text-secondary);transition:all .2s}.tab:hover{border-color:var(--accent-primary)}.tab.active{background:var(--accent-primary);color:var(--bg-app);border-color:var(--accent-primary)}.divider{height:1px;background:var(--border-subtle);margin:16px 0}.divider-vertical{width:1px;background:var(--border-subtle);margin:0 8px;align-self:stretch}.toolbar{padding:12px;background:var(--bg-panel);border-bottom:1px solid var(--border-subtle);display:flex;gap:12px;align-items:center}.toolbar-title{font-weight:700;color:var(--text-primary)}.text-muted{color:var(--text-muted)}.text-sm{font-size:12px}.text-xs{font-size:11px}.text-center{text-align:center}.empty-state{margin:auto;text-align:center;color:var(--text-muted);padding:40px}.empty-state h2{margin-bottom:8px;color:var(--text-secondary)}.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.grid-auto{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.flex{display:flex}.flex-col{flex-direction:column}.flex-1{flex:1}.gap-sm{gap:4px}.gap-md{gap:8px}.gap-lg{gap:16px}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.spinner{width:18px;height:18px;border:2px solid var(--border-subtle);border-top-color:var(--accent-primary);border-radius:50%;animation:spin .8s linear infinite;display:inline-block;vertical-align:middle}.spinner-lg{width:40px;height:40px;border-width:3px}@keyframes spin{to{transform:rotate(360deg)}}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:var(--text-muted);gap:16px;height:100%}.toast-container{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:12px;pointer-events:none}.toast{background:var(--bg-surface);color:var(--text-primary);border:1px solid var(--border-subtle);border-radius:8px;padding:12px 16px;min-width:300px;max-width:400px;box-shadow:0 4px 12px #0006;display:flex;align-items:flex-start;gap:12px;pointer-events:auto;transform:translate(120%);opacity:0;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.toast.show{transform:translate(0);opacity:1}.toast-icon{font-size:18px;flex-shrink:0}.toast-message{flex:1;font-size:13px;line-height:1.4;padding-top:2px}.toast-close{background:none;border:none;color:var(--text-muted);font-size:18px;cursor:pointer;line-height:1;padding:0;margin:0;transition:color .2s}.toast-close:hover{color:var(--text-primary)}.toast-info{border-left:4px solid var(--accent-primary)}.toast-success{border-left:4px solid #4ade80}.toast-warning{border-left:4px solid #facc15}.toast-error{border-left:4px solid #f87171}.tour-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10000;pointer-events:none}.tour-highlight{position:absolute;border-radius:6px;box-shadow:0 0 0 9999px #000000bf;border:2px solid var(--accent-primary);transition:all .3s cubic-bezier(.25,1,.5,1);pointer-events:none}.tour-popup{position:absolute;width:320px;background:var(--bg-panel);border:1px solid var(--border-subtle);border-radius:8px;box-shadow:0 10px 30px #00000080;padding:16px;pointer-events:auto;transition:all .3s cubic-bezier(.25,1,.5,1);opacity:1;z-index:10001}.tour-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.tour-header strong{font-size:16px;color:var(--text-primary)}.tour-body{font-size:13px;line-height:1.5;color:var(--text-secondary);margin-bottom:16px}.tour-footer{display:flex;align-items:center;justify-content:space-between}.tour-actions{display:flex;gap:8px}@keyframes tour-pop{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}.tour-popup{animation:tour-pop .3s ease-out}.rte-wrapper{display:flex;flex-direction:column;height:100%;border:1px solid var(--border-subtle);border-radius:4px;overflow:hidden;position:relative}.rte-toolbar{padding:8px;background:var(--bg-surface);border-bottom:1px solid var(--border-subtle);display:flex;gap:4px;flex-wrap:wrap}.rte-btn{padding:4px 8px;cursor:pointer;background:var(--bg-panel);border:1px solid var(--border-strong);border-radius:3px;color:var(--text-primary);font-size:13px;transition:all .15s}.rte-btn:hover{background:var(--bg-surface);border-color:var(--accent-primary)}.rte-btn-bold{font-weight:700}.rte-btn-italic{font-style:italic}.rte-divider{width:1px;background:var(--border-subtle);margin:0 4px}.rte-content{flex:1;padding:16px;background:var(--bg-input);color:var(--text-primary);outline:none;overflow-y:auto;line-height:1.6}.rte-content:focus{outline:none}.wiki-link{color:var(--accent-primary);cursor:pointer;text-decoration:underline;font-weight:500}.wiki-link:hover{filter:brightness(1.2)}.rte-autocomplete{display:none;position:absolute;background:var(--bg-panel);border:1px solid var(--border-strong);border-radius:4px;box-shadow:0 4px 12px #0003;max-height:200px;overflow-y:auto;z-index:100;width:200px}.rte-autocomplete-item{padding:8px 12px;cursor:pointer;font-size:13px;color:var(--text-primary);transition:background .1s}.rte-autocomplete-item:hover,.rte-autocomplete-item.selected{background:var(--bg-surface)}.library-layout{height:100%;display:grid;grid-template-columns:280px 1fr;gap:1px;background:var(--border-subtle)}.library-sidebar{background:var(--bg-panel);display:flex;flex-direction:column;overflow:hidden}.library-tabs{display:flex;flex-wrap:wrap;gap:4px;padding:8px;border-bottom:1px solid var(--border-subtle)}.library-search-bar{padding:8px;border-bottom:1px solid var(--border-subtle);display:flex;gap:8px}.library-search-bar .input{flex:1}.library-list{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:4px}.library-list-empty{padding:16px;text-align:center;color:var(--text-muted);font-size:12px}.library-main{background:var(--bg-app);display:flex;flex-direction:column;overflow:hidden}.library-editor{display:none;flex-direction:column;height:100%;padding:24px;overflow-y:auto}.library-editor.active{display:flex}.entry-header{display:flex;align-items:center;gap:12px;margin-bottom:16px}.entry-icon{font-size:28px}.entry-title{flex:1}.metadata-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px;padding:16px;background:var(--bg-surface);border-radius:8px}.metadata-field{display:flex;flex-direction:column;gap:4px}.description-label{font-size:12px;font-weight:700;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase}.description-editor{flex:1;min-height:200px}.relationships-section{margin-top:20px;padding:16px;background:var(--bg-surface);border-radius:8px}.relationships-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.relationships-list{display:flex;flex-direction:column;gap:8px}.relationship-row{display:flex;align-items:center;gap:8px;padding:8px;background:var(--bg-panel);border-radius:4px}.relationship-type{font-size:12px;color:var(--text-muted)}.relationship-target{font-size:14px;cursor:pointer}.relationship-target:hover{color:var(--accent-primary)}.relationship-delete{background:none;border:none;cursor:pointer;color:var(--status-error);font-size:14px;margin-left:auto}.back-references{margin-top:16px;padding-top:12px;border-top:1px solid var(--border-subtle)}.back-ref-label{font-size:11px;color:var(--text-muted);margin-bottom:8px}.back-ref-item{display:flex;align-items:center;gap:6px;padding:4px 0;font-size:12px;cursor:pointer;color:var(--text-secondary)}.back-ref-item:hover{color:var(--text-primary)}.save-status{font-size:11px;color:var(--text-muted);margin-top:12px;text-align:right}.project-layout{height:100%;overflow-y:auto;background:var(--bg-app)}.project-content{max-width:800px;margin:0 auto;padding:40px 24px}.project-header{text-align:center;margin-bottom:40px}.project-icon{font-size:48px;margin-bottom:16px}.project-title{font-size:32px;font-weight:700;text-align:center;background:transparent;border:none;border-bottom:2px solid transparent;color:var(--text-primary);outline:none;width:100%;transition:border-color .2s}.project-title:focus{border-bottom-color:var(--accent-primary)}.project-author{color:var(--text-muted);margin-top:8px}.project-author input{background:transparent;border:none;color:var(--text-muted);outline:none;text-align:center;font-size:14px}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-bottom:32px}.stat-card{background:var(--bg-surface);padding:16px;border-radius:8px;text-align:center;border-left:3px solid var(--accent-primary)}.stat-icon{font-size:24px}.stat-value{font-size:24px;font-weight:700;color:var(--text-primary)}.stat-label{font-size:11px;color:var(--text-muted);text-transform:uppercase}.project-details{background:var(--bg-panel);padding:24px;border-radius:12px;margin-bottom:24px}.project-details h3{margin-bottom:16px;color:var(--text-primary)}.details-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.detail-field{display:flex;flex-direction:column;gap:4px}.detail-field.full-width{grid-column:1 / -1}.quick-actions{display:flex;gap:12px;justify-content:center}.action-btn{padding:12px 24px;cursor:pointer;background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:8px;color:var(--text-primary);display:flex;align-items:center;gap:8px;font-size:14px;transition:all .2s}.action-btn:hover{background:var(--bg-panel);border-color:var(--accent-primary)}.graph-layout{height:100%;display:flex;flex-direction:column;background:var(--bg-app)}.graph-toolbar{padding:12px;background:var(--bg-panel);border-bottom:1px solid var(--border-subtle);display:flex;gap:12px;align-items:center}.graph-toolbar-icon{font-size:18px}.graph-toolbar-title{font-weight:700;color:var(--text-primary)}.graph-container{flex:1;position:relative;overflow:hidden}.graph-canvas{position:absolute;top:0;right:0;bottom:0;left:0}.graph-nodes{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.laboratory-layout{height:100%;overflow-y:auto;background:var(--bg-app)}.laboratory-content{max-width:800px;margin:0 auto;padding:24px}.laboratory-title{font-size:24px;margin-bottom:8px;color:var(--accent-primary)}.laboratory-description{color:var(--text-secondary);margin-bottom:24px}.dice-roller{background:var(--bg-surface);padding:20px;border-radius:8px;border:1px solid var(--border-subtle);margin-bottom:24px}.dice-expression-row{display:flex;gap:8px;margin-top:8px}.dice-result{margin-top:16px;padding:12px;border-left:3px solid var(--accent-primary);background:var(--bg-app)}.roll-total{font-size:20px;margin-top:8px}.simulation-section,.compare-section{background:var(--bg-surface);padding:20px;border-radius:8px;border:1px solid var(--border-subtle);margin-bottom:24px}.section-title{font-size:16px;margin-bottom:16px;color:var(--text-primary)}.simulation-controls{margin-bottom:16px}.stats-row{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}.stat-box{flex:1;min-width:60px;background:var(--bg-app);padding:12px 8px;border-radius:6px;text-align:center;border:1px solid var(--border-subtle)}.stat-box span{display:block;font-size:20px;font-weight:700;color:var(--accent-primary)}.stat-box small{display:block;font-size:10px;color:var(--text-muted);text-transform:uppercase;margin-top:4px}.histogram{display:flex;align-items:flex-end;gap:2px;height:150px;padding:8px 0;border-bottom:1px solid var(--border-subtle)}.hist-bar-container{flex:1;display:flex;flex-direction:column;align-items:center;height:100%}.hist-bar{width:100%;max-width:30px;background:var(--accent-primary);border-radius:2px 2px 0 0;min-height:2px;transition:height .3s ease;cursor:pointer}.hist-bar:hover{background:var(--accent-secondary)}.hist-label{font-size:9px;color:var(--text-muted);margin-top:4px}.compare-inputs{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.compare-inputs .input{flex:1;min-width:100px}.compare-results{margin-top:16px;padding:16px;background:var(--bg-app);border-radius:6px}.compare-stat{padding:8px 0;border-bottom:1px solid var(--border-subtle)}.compare-stat:last-child{border-bottom:none}.compare-stat .highlight{color:var(--accent-primary);font-weight:700;font-size:18px}.compare-stat small{color:var(--text-muted);margin-left:8px}.compare-stat.tie{color:var(--text-muted);font-size:14px}.architect-workspace{width:100%;height:100%;background-color:#1a1a24;background-image:radial-gradient(circle,var(--border-subtle) 1px,transparent 1px);background-size:24px 24px;overflow:hidden;position:relative;-webkit-user-select:none;user-select:none}.node-layer{transform-origin:0 0;pointer-events:none;width:100%;height:100%}.node-layer>*{pointer-events:auto}.connection-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}.connection-layer svg{overflow:visible}.connection-line{fill:none;stroke:var(--text-muted);stroke-width:2px;pointer-events:stroke;cursor:pointer;transition:stroke .15s,stroke-width .15s}.connection-line:hover{stroke:var(--text-secondary);stroke-width:3px}.connection-line.selected{stroke:var(--accent-primary);stroke-width:3px}.connection-line.wiring{stroke:var(--accent-secondary);stroke-width:2px;stroke-dasharray:5 5;animation:dash .5s linear infinite}@keyframes dash{to{stroke-dashoffset:-10}}.node{position:absolute;width:200px;background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:6px;box-shadow:0 4px 6px #0000004d;display:flex;flex-direction:column;z-index:1}.node.selected{border-color:var(--accent-primary);box-shadow:0 0 0 2px var(--accent-primary)}.node.event{border-left:4px solid #4ade80}.node.event .node-header{background:linear-gradient(90deg,rgba(74,222,128,.2),transparent)}.node.condition{border-left:4px solid #facc15}.node.condition .node-header{background:linear-gradient(90deg,rgba(250,204,21,.2),transparent)}.node.action{border-left:4px solid #60a5fa}.node.action .node-header{background:linear-gradient(90deg,rgba(96,165,250,.2),transparent)}.node.reference{border-left:4px solid #c084fc}.node.reference .node-header{background:linear-gradient(90deg,rgba(192,132,252,.2),transparent)}.node.rules{border-left:4px solid #f59e0b}.node.rules .node-header{background:linear-gradient(90deg,rgba(245,158,11,.2),transparent)}.node.compound{border-left:4px solid #06b6d4}.node.compound .node-header{background:linear-gradient(90deg,rgba(6,182,212,.2),transparent)}.node-header{background:var(--bg-panel);padding:8px 12px;border-bottom:1px solid var(--border-subtle);border-radius:6px 6px 0 0;font-weight:700;font-size:13px;display:flex;align-items:center;cursor:grab}.node-header:active{cursor:grabbing}.node-body{padding:12px;font-size:12px}.socket-row{display:flex;justify-content:space-between;align-items:center;margin:4px 0;height:24px}.socket{width:12px;height:12px;border-radius:50%;background:var(--text-muted);border:2px solid var(--bg-surface);cursor:crosshair;transition:transform .1s,background .1s,box-shadow .1s}.socket:hover{transform:scale(1.3);background:var(--accent-primary);box-shadow:0 0 8px var(--accent-primary)}.socket.wiring{background:var(--accent-secondary);box-shadow:0 0 12px var(--accent-secondary);transform:scale(1.4)}.socket.input{margin-left:-18px}.socket.output{margin-right:-18px}.architect-toolbar{position:absolute;top:16px;left:16px;right:16px;background:var(--bg-panel);padding:8px 12px;border-radius:8px;border:1px solid var(--border-subtle);display:flex;align-items:center;gap:8px;z-index:100}.toolbar-group{display:flex;align-items:center;gap:4px}.toolbar-divider{width:1px;height:24px;background:var(--border-subtle);margin:0 4px}.toolbar-spacer{flex:1}.toolbar-hint{font-size:11px;color:var(--text-muted);align-self:center}.architect-toolbar select{min-width:140px}.export-layout{height:100%;overflow-y:auto;background:var(--bg-app)}.export-content{max-width:800px;margin:0 auto;padding:24px}.export-title{font-size:24px;margin-bottom:8px;color:var(--accent-primary)}.export-description{color:var(--text-secondary);margin-bottom:24px}.export-section{background:var(--bg-surface);padding:20px;border-radius:8px;border:1px solid var(--border-subtle);margin-bottom:24px}.format-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:12px}.format-btn{display:flex;flex-direction:column;align-items:center;padding:20px 16px;background:var(--bg-app);border:2px solid var(--border-subtle);border-radius:8px;cursor:pointer;transition:all .2s ease}.format-btn:hover{border-color:var(--accent-primary);background:var(--bg-surface)}.format-btn.active{border-color:var(--accent-primary);background:linear-gradient(135deg,rgba(124,58,237,.1),transparent)}.format-icon{font-size:32px;margin-bottom:8px}.format-name{font-size:14px;font-weight:600;color:var(--text-primary)}.format-desc{font-size:11px;color:var(--text-muted);margin-top:4px}.export-preview{background:var(--bg-app);border:1px solid var(--border-subtle);border-radius:6px;padding:16px;max-height:400px;overflow:auto}.preview-loading{color:var(--text-muted);text-align:center;padding:40px}.preview-code{font-family:Consolas,Monaco,monospace;font-size:12px;line-height:1.4;margin:0;white-space:pre-wrap;word-break:break-word}.preview-note{background:#7c3aed1a;border-left:3px solid var(--accent-primary);padding:12px;margin-bottom:12px;color:var(--text-secondary)}.preview-error{color:var(--status-error);padding:20px}.export-actions{display:flex;justify-content:center;padding:12px 0}.btn-lg{padding:12px 48px;font-size:16px}.scribe-layout{display:grid;grid-template-columns:280px 1fr;height:100%;background:var(--bg-app)}.scribe-sidebar{display:flex;flex-direction:column;background:var(--bg-surface);border-right:1px solid var(--border-subtle);overflow:hidden}.sidebar-header{padding:16px;border-bottom:1px solid var(--border-subtle);font-size:14px}.sidebar-section{padding:16px;border-bottom:1px solid var(--border-subtle)}.sidebar-section.flex-1{flex:1;overflow-y:auto}.section-label{font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;margin-bottom:12px}.mode-buttons{display:flex;flex-direction:column;gap:8px}.mode-btn{padding:10px 12px;background:var(--bg-app);border:1px solid var(--border-subtle);border-radius:6px;text-align:left;font-size:13px;cursor:pointer;transition:all .2s ease}.mode-btn:hover{border-color:var(--accent-primary)}.mode-btn.active{background:linear-gradient(135deg,rgba(124,58,237,.2),transparent);border-color:var(--accent-primary);color:var(--accent-primary)}.entry-list{display:flex;flex-direction:column;gap:12px}.entry-category{display:flex;flex-direction:column;gap:6px}.category-label{font-size:12px;font-weight:600;color:var(--text-secondary)}.entry-checkbox{display:flex;align-items:center;gap:8px;padding:6px 8px;background:var(--bg-app);border-radius:4px;cursor:pointer;font-size:12px}.entry-checkbox:hover{background:var(--bg-elevated)}.entry-checkbox input{accent-color:var(--accent-primary)}.empty-hint{font-size:12px;color:var(--text-muted);font-style:italic;text-align:center;padding:20px}.sidebar-footer{padding:12px;border-top:1px solid var(--border-subtle);display:flex;gap:8px}.sidebar-footer select{flex:1}.scribe-main{display:flex;flex-direction:column;overflow:hidden}.chat-log{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px}.chat-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;color:var(--text-muted);opacity:.7}.chat-empty .empty-icon{font-size:64px;margin-bottom:16px}.chat-empty .empty-title{font-size:18px;margin-bottom:8px}.chat-empty .empty-hint{font-size:13px;max-width:300px}.chat-bubble{max-width:85%;padding:14px 18px;border-radius:12px;line-height:1.5}.chat-bubble.user{align-self:flex-end;background:var(--accent-primary);color:#fff;border-bottom-right-radius:4px}.chat-bubble.model{align-self:flex-start;background:var(--bg-surface);border:1px solid var(--border-subtle);border-bottom-left-radius:4px}.bubble-content{font-size:14px}.bubble-meta{display:flex;justify-content:space-between;align-items:center;margin-top:8px;font-size:11px;opacity:.7}.btn-copy{background:none;border:none;cursor:pointer;opacity:.6;transition:opacity .2s}.btn-copy:hover{opacity:1}.chat-footer{padding:16px;border-top:1px solid var(--border-subtle);background:var(--bg-surface)}.chat-controls{display:flex;gap:12px;margin-bottom:12px}.chat-input-row{display:flex;gap:12px}.chat-input-row textarea{flex:1;resize:none}.chat-input-row .btn{align-self:flex-end;padding:12px 24px}.settings-layout{height:100%;overflow-y:auto;background:var(--bg-app)}.settings-content{max-width:800px;margin:0 auto;padding:24px}.settings-title{font-size:24px;margin-bottom:24px;color:var(--accent-primary)}.settings-section{background:var(--bg-surface);padding:20px;border-radius:8px;border:1px solid var(--border-subtle);margin-bottom:24px}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.configs-list{display:flex;flex-direction:column;gap:12px}.config-card{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--bg-app);border:2px solid var(--border-subtle);border-radius:8px;transition:all .2s ease}.config-card:hover{border-color:var(--border-default)}.config-card.active{border-color:var(--accent-primary);background:linear-gradient(135deg,rgba(124,58,237,.1),transparent)}.config-name{font-weight:600;font-size:14px;color:var(--text-primary)}.config-provider{font-size:12px;color:var(--text-muted);margin-top:4px}.config-actions{display:flex;gap:8px}.empty-state{text-align:center;padding:40px;color:var(--text-muted)}.empty-icon{font-size:48px;margin-bottom:12px;opacity:.5}.empty-text{font-size:14px;margin-bottom:4px}.empty-hint{font-size:12px;opacity:.7}.config-editor{position:fixed;top:0;left:0;right:0;bottom:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.editor-content{background:var(--bg-surface);border-radius:12px;padding:24px;width:400px;max-width:90vw;border:1px solid var(--border-subtle)}.editor-title{font-size:18px;margin-bottom:20px;color:var(--accent-primary)}.field-group{margin-bottom:16px}.field-label{display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px}.editor-actions{display:flex;gap:12px;margin-top:24px;align-items:center}.test-result{margin-top:16px;padding:12px;border-radius:6px;font-size:13px}.test-pending{color:var(--text-muted)}.test-success{color:var(--status-success)}.test-error{color:var(--status-error)}.grimoire-layout{display:grid;grid-template-columns:280px 1fr;height:100%;background:var(--bg-app)}.grimoire-sidebar{display:flex;flex-direction:column;background:var(--bg-surface);border-right:1px solid var(--border-subtle);overflow:hidden}.grimoire-sidebar .sidebar-header{padding:16px;border-bottom:1px solid var(--border-subtle);font-size:14px}.category-tabs{display:flex;gap:4px;padding:12px;border-bottom:1px solid var(--border-subtle);flex-wrap:wrap}.cat-tab{width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-size:20px;background:var(--bg-app);border:2px solid var(--border-subtle);border-radius:8px;cursor:pointer;transition:all .2s ease}.cat-tab:hover{border-color:var(--cat-color, var(--accent-primary));transform:scale(1.05)}.cat-tab.active{border-color:var(--cat-color, var(--accent-primary));background:linear-gradient(135deg,color-mix(in srgb,var(--cat-color, var(--accent-primary)) 20%,transparent),transparent);box-shadow:0 0 12px color-mix(in srgb,var(--cat-color, var(--accent-primary)) 30%,transparent)}.rule-list{flex:1;overflow-y:auto;padding:8px}.rule-item{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg-app);border:1px solid var(--border-subtle);border-radius:8px;margin-bottom:8px;cursor:pointer;transition:all .2s ease}.rule-item:hover{border-color:var(--border-default)}.rule-item.selected{border-color:var(--accent-primary);background:linear-gradient(135deg,rgba(124,58,237,.1),transparent)}.rule-icon{font-size:24px;opacity:.8}.rule-name{font-weight:600;font-size:14px}.rule-meta{font-size:11px;color:var(--text-muted);margin-top:2px}.grimoire-sidebar .sidebar-footer{padding:12px;border-top:1px solid var(--border-subtle)}.grimoire-main{display:flex;flex-direction:column;overflow:hidden}.editor-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--text-muted);opacity:.5}.editor-empty .empty-icon{font-size:64px;margin-bottom:16px}.rule-editor{padding:24px;overflow-y:auto;flex:1}.editor-header{display:flex;gap:12px;margin-bottom:24px}.editor-header .input-lg{flex:1;font-size:18px;font-weight:600;padding:12px 16px}.editor-fields{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:24px}.field-group{display:flex;flex-direction:column;gap:6px}.field-label{font-size:12px;font-weight:600;color:var(--text-secondary)}.field-input{padding:10px 12px}.editor-description{margin-bottom:24px}.editor-description #description-editor{min-height:200px;background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:8px}.editor-footer{display:flex;justify-content:flex-end;gap:12px}.grimoire-sidebar .empty-state{text-align:center;padding:40px 20px;color:var(--text-muted)}.grimoire-sidebar .empty-icon{font-size:48px;margin-bottom:12px;opacity:.5}.grimoire-sidebar .empty-text{font-size:13px}
